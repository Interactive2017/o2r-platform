<div>

<!-- list of similar compendia -->
  <md-card ng-if="vm.similarPubs">
    <md-card-content>
      <md-list>

        <md-list-item class="md-2-line" ng-repeat="pub in vm.similarPubs">
          <div class="md-list-item-text" layout="row">
            <div flex="70">
              <md-button ui-sref="erc({ercid: pub.id})" target="_blank"><b class="search-clickOnName">{{pub.metadata.o2r.title | cutLongName}}</b></md-button>
              <p flex><b>Created on:</b> {{pub.created | date : 'yyyy-MM-dd HH:mm'}}</p>
              <p flex><b>by</b> {{pub.user}}</p>
              <p flex><b>{{pub.metadata.raw.description}}</b></p>
            </div>
            <div flex>
              <md-button title="substitution options" class="md-raised" ng-click="vm.substituteOptions($event, pub)"><md-icon aria-label md-svg-src="{{vm.icons.substitution_options}}"></md-icon></md-button>
            </div>
          </div>
          <md-divider ng-if="!($last)"></md-divider>
        </md-list-item>

      </md-list>
    </md-card-content>
  </md-card>

  <!-- Message if not a single compendium has been uploaded yet -->
  <md-card ng-if="!vm.similarPubs">
    <md-card-content>
      <span>No similar compendia.</span>
    </md-card-content>
  </md-card>

</div>

<div style="visibility: hidden">
  <div class="md-dialog-container" id="showCandidateView">
    <md-dialog layout-padding>

      <div flex layout="row">
        <!-- base ERC title -->
        <div flex layout="col">
          <h2>base ERC:</h2>
        </div>
        <!-- overlay ERC title -->
        <div flex layout="col">
          <h2>overlay ERC:</h2>
        </div>
      </div>

      <div flex layout="row">
        <!-- base ERC title -->
        <div flex layout="col">
          <h4>{{vm.base.metadata.o2r.title}}</h4>
        </div>
        <!-- overlay ERC title -->
        <div flex layout="col">
          <h4>{{vm.overlay.metadata.o2r.title}}</h4>
        </div>
      </div>

      <md-card>
        <md-card-content>
          <div flex layout="row">
            <!-- base ERC content -->
            <div flex="50" layout="col">

              <md-list>
                <md-list-item class="md-2-line" ng-repeat="file in vm.basefiles">
                  <input aria-label type="checkbox" ng-checked="exists(file, selectedSubstitutionFiles)" ng-click="toggleSubstitutionFile(file, selectedSubstitutionFiles)">
                  {{ file }} <span ng-if="vm.exists(file, selectedSubstitutionFiles)">selected</span>
                  <md-divider ng-if="!($last)"></md-divider>
                </md-list-item>
              </md-list>

            </div>
            <!-- overlay ERC content -->
            <div flex layout="col">
              <md-list>
                <md-list-item class="md-2-line" ng-repeat="file in vm.overlayfiles">
                  <input aria-label type="checkbox" ng-checked="exists(file, selectedSubstitutionFiles)" ng-click="toggleSubstitutionFile(file, selectedSubstitutionFiles)">
                  {{ file }} <span ng-if="vm.exists(file, selectedSubstitutionFiles)">selected</span>
                  <md-divider ng-if="!($last)"></md-divider>
                </md-list-item>
              </md-list>
            </div>
          </div>
          <div flex layout="row">
            {{selected | json}}
          </div>
          <div>
              <md-button ng-click="cancel()">cancel</md-button>
              <md-button ng-click="vm.initSubstitution()">substitute</md-button>
          </div>
        </md-card-content>
      </md-card>

    </md-dialog>
  </div>
</div>
